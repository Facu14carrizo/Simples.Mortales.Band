import{j as t}from"./three-DVMiArb1.js";import{r as e,c as s,R as i}from"./vendor-DCkyEhNH.js";import{m as r,P as a,a as n,V as o,b as h,c as l,A as c,C as d,d as g,X as p}from"./ui-DZaCw2tl.js";const u=()=>{var s,i;const[a,n]=e.useState(null),o=[{id:1,src:"src/resources/toys/Artboard Sticker palermo.jpg",alt:"Sticker Palermo"},{id:2,src:"src/resources/toys/Artboard Sticker palermo02.png",alt:"Sticker Palermo 2"},{id:4,src:"src/resources/toys/PrimerArtBoartSticker.jpg",alt:"Sticker SM Original"},{id:5,src:"src/resources/toys/Stickers mortales_page-0001.jpg",alt:"Stickers Mortales P치gina 1"},{id:6,src:"src/resources/toys/Stickers mortales_page-0002.jpg",alt:"Stickers Mortales P치gina 2"},{id:7,src:"src/resources/toys/Stickers mortales_page-0003.jpg",alt:"Stickers Mortales P치gina 3"},{id:8,src:"src/resources/toys/Stickers mortales_page-0004.jpg",alt:"Stickers Mortales P치gina 4"}],h=()=>{n(null)};return t.jsxs("div",{className:"relative",children:[a&&t.jsx("div",{className:"fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4",onClick:h,children:t.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[t.jsx("img",{src:null==(s=o.find(t=>t.id===a))?void 0:s.src,alt:null==(i=o.find(t=>t.id===a))?void 0:i.alt,className:"max-w-full max-h-[90vh] w-auto h-auto object-contain"}),t.jsx("button",{className:"absolute top-4 right-4 text-white/20 hover:text-white/40 transition-colors",onClick:h,"aria-label":"Close fullscreen view",children:t.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 gap-8 max-w-[1200px] mx-auto",children:o.map((e,s)=>t.jsx(r.div,{className:"relative group cursor-pointer overflow-hidden rounded-lg shadow-2xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*s},onClick:()=>{return t=e.id,void n(t);var t},children:t.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-zinc-800 to-zinc-900 p-4",children:[t.jsx("img",{src:e.src,alt:e.alt,className:"w-full h-auto object-contain transition-all duration-700 group-hover:scale-110 group-hover:rotate-1"}),t.jsx("div",{className:"absolute inset-0 rounded-lg border-2 border-transparent group-hover:border-silver-400 opacity-0 group-hover:opacity-100 transition-all duration-500 pointer-events-none"}),t.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-all duration-700 pointer-events-none",children:t.jsx("div",{className:"absolute top-0 left-0 w-full h-1/3 bg-gradient-to-b from-white/15 to-transparent transform -translate-y-full group-hover:translate-y-0 transition-transform duration-700"})}),t.jsxs("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-all duration-500 pointer-events-none",children:[t.jsx("div",{className:"absolute top-1 left-1 w-2 h-2 bg-white/20 rounded-full blur-sm"}),t.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 bg-white/20 rounded-full blur-sm"})]})]})},e.id))})]})};var m={exports:{}};!function(t){class e{constructor(t,e){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=e,this.nowDrawingDensity=this.createdDensity,this.render=t}setDensity(t){this.createdDensity=t,this.nowDrawingDensity=t}setDrawingDensity(t){this.nowDrawingDensity=t}setPosition(t){this.state.position=t}setAngle(t){this.state.angle=t}setArea(t){this.state.area=t}setHardDrawingAngle(t){this.state.hardDrawingAngle=t}setHardAngle(t){this.state.hardAngle=t,this.state.hardDrawingAngle=t}setOrientation(t){this.orientation=t}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class s extends e{constructor(t,e,s){super(t,s),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=e}draw(t){const e=this.render.getContext(),s=this.render.convertToGlobal(this.state.position),i=this.render.getRect().pageWidth,r=this.render.getRect().height;e.save(),e.translate(s.x,s.y),e.beginPath();for(let a of this.state.area)null!==a&&(a=this.render.convertToGlobal(a),e.lineTo(a.x-s.x,a.y-s.y));e.rotate(this.state.angle),e.clip(),this.isLoad?e.drawImage(this.image,0,0,i,r):this.drawLoader(e,{x:0,y:0},i,r),e.restore()}simpleDraw(t){const e=this.render.getRect(),s=this.render.getContext(),i=e.pageWidth,r=e.height,a=1===t?e.left+e.pageWidth:e.left,n=e.top;this.isLoad?s.drawImage(this.image,a,n,i,r):this.drawLoader(s,{x:a,y:n},i,r)}drawLoader(t,e,s,i){t.beginPath(),t.strokeStyle="rgb(200, 200, 200)",t.fillStyle="rgb(255, 255, 255)",t.lineWidth=1,t.rect(e.x+1,e.y+1,s-1,i-1),t.stroke(),t.fill();const r={x:e.x+s/2,y:e.y+i/2};t.beginPath(),t.lineWidth=10,t.arc(r.x,r.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),t.stroke(),t.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class i{constructor(t,e){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=e,this.app=t,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let e=0;e<this.pages.length;e++)this.portraitSpread.push([e]);let t=0;this.isShowCover&&(this.pages[0].setDensity("hard"),this.landscapeSpread.push([t]),t++);for(let e=t;e<this.pages.length;e+=2)e<this.pages.length-1?this.landscapeSpread.push([e,e+1]):(this.landscapeSpread.push([e]),this.pages[e].setDensity("hard"))}getSpread(){return"landscape"===this.render.getOrientation()?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(t){const e=this.getSpread();for(let s=0;s<e.length;s++)if(t===e[s][0]||t===e[s][1])return s;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(t){if(t>=0&&t<this.pages.length)return this.pages[t];throw new Error("Invalid page number")}nextBy(t){const e=this.pages.indexOf(t);return e<this.pages.length-1?this.pages[e+1]:null}prevBy(t){const e=this.pages.indexOf(t);return e>0?this.pages[e-1]:null}getFlippingPage(t){const e=this.currentSpreadIndex;if("portrait"===this.render.getOrientation())return 0===t?this.pages[e].newTemporaryCopy():this.pages[e-1];{const s=0===t?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===s.length||0===t?this.pages[s[0]]:this.pages[s[1]]}}getBottomPage(t){const e=this.currentSpreadIndex;if("portrait"===this.render.getOrientation())return 0===t?this.pages[e+1]:this.pages[e-1];{const s=0===t?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===s.length?this.pages[s[0]]:0===t?this.pages[s[1]]:this.pages[s[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(t=null){if(null===t&&(t=this.currentPageIndex),t<0||t>=this.pages.length)return;const e=this.getSpreadIndexByPage(t);null!==e&&(this.currentSpreadIndex=e,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(t){if(!(t>=0&&t<this.getSpread().length))throw new Error("Invalid page");this.currentSpreadIndex=t}showSpread(){const t=this.getSpread()[this.currentSpreadIndex];2===t.length?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(this.pages[t[1]])):"landscape"===this.render.getOrientation()&&t[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[t[0]])),this.currentPageIndex=t[0],this.app.updatePageIndex(this.currentPageIndex)}}class r extends i{constructor(t,e,s){super(t,e),this.imagesHref=s}load(){for(const t of this.imagesHref){const e=new s(this.render,t,"soft");e.load(),this.pages.push(e)}this.createSpread()}}class a{static GetDistanceBetweenTwoPoint(t,e){return null===t||null===e?1/0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}static GetSegmentLength(t){return a.GetDistanceBetweenTwoPoint(t[0],t[1])}static GetAngleBetweenTwoLine(t,e){const s=t[0].y-t[1].y,i=e[0].y-e[1].y,r=t[1].x-t[0].x,a=e[1].x-e[0].x;return Math.acos((s*i+r*a)/(Math.sqrt(s*s+r*r)*Math.sqrt(i*i+a*a)))}static PointInRect(t,e){return null===e?null:e.x>=t.left&&e.x<=t.width+t.left&&e.y>=t.top&&e.y<=t.top+t.height?e:null}static GetRotatedPoint(t,e,s){return{x:t.x*Math.cos(s)+t.y*Math.sin(s)+e.x,y:t.y*Math.cos(s)-t.x*Math.sin(s)+e.y}}static LimitPointToCircle(t,e,s){if(a.GetDistanceBetweenTwoPoint(t,s)<=e)return s;const i=t.x,r=t.y,n=s.x,o=s.y;let h=Math.sqrt(Math.pow(e,2)*Math.pow(i-n,2)/(Math.pow(i-n,2)+Math.pow(r-o,2)))+i;s.x<0&&(h*=-1);let l=(h-i)*(r-o)/(i-n)+r;return i-n+r===0&&(l=e),{x:h,y:l}}static GetIntersectBetweenTwoSegment(t,e,s){return a.PointInRect(t,a.GetIntersectBeetwenTwoLine(e,s))}static GetIntersectBeetwenTwoLine(t,e){const s=t[0].y-t[1].y,i=e[0].y-e[1].y,r=t[1].x-t[0].x,a=e[1].x-e[0].x,n=t[0].x*t[1].y-t[1].x*t[0].y,o=e[0].x*e[1].y-e[1].x*e[0].y,h=s*o-i*n,l=r*o-a*n,c=-(n*a-o*r)/(s*a-i*r),d=-(s*o-i*n)/(s*a-i*r);if(isFinite(c)&&isFinite(d))return{x:c,y:d};if(Math.abs(h-l)<.1)throw new Error("Segment included");return null}static GetCordsFromTwoPoint(t,e){const s=Math.abs(t.x-e.x),i=Math.abs(t.y-e.y),r=Math.max(s,i),a=[t];function n(t,e,s,i,r){return e>t?t+r*(s/i):e<t?t-r*(s/i):t}for(let o=1;o<=r;o+=1)a.push({x:n(t.x,e.x,s,r,o),y:n(t.y,e.y,i,r,o)});return a}}class n extends e{constructor(t,e,s){super(t,s),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=e,this.element.classList.add("stf__item"),this.element.classList.add("--"+s)}newTemporaryCopy(){return"hard"===this.nowDrawingDensity?this:(null===this.temporaryCopy&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new n(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){null!==this.temporaryCopy&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(t){const e=t||this.nowDrawingDensity,s=this.render.convertToGlobal(this.state.position),i=this.render.getRect().pageWidth,r=this.render.getRect().height;this.element.classList.remove("--simple");const a=`\n            display: block;\n            z-index: ${this.element.style.zIndex};\n            left: 0;\n            top: 0;\n            width: ${i}px;\n            height: ${r}px;\n        `;"hard"===e?this.drawHard(a):this.drawSoft(s,a)}drawHard(t=""){const e=this.render.getRect().left+this.render.getRect().width/2,s=this.state.hardDrawingAngle,i=t+"\n                backface-visibility: hidden;\n                -webkit-backface-visibility: hidden;\n                clip-path: none;\n                -webkit-clip-path: none;\n            "+(0===this.orientation?`transform-origin: ${this.render.getRect().pageWidth}px 0; \n                   transform: translate3d(0, 0, 0) rotateY(${s}deg);`:`transform-origin: 0 0; \n                   transform: translate3d(${e}px, 0, 0) rotateY(${s}deg);`);this.element.style.cssText=i}drawSoft(t,e=""){let s="polygon( ";for(const r of this.state.area)if(null!==r){let t=1===this.render.getDirection()?{x:-r.x+this.state.position.x,y:r.y-this.state.position.y}:{x:r.x-this.state.position.x,y:r.y-this.state.position.y};t=a.GetRotatedPoint(t,{x:0,y:0},this.state.angle),s+=t.x+"px "+t.y+"px, "}s=s.slice(0,-2),s+=")";const i=e+`transform-origin: 0 0; clip-path: ${s}; -webkit-clip-path: ${s};`+(this.render.isSafari()&&0===this.state.angle?`transform: translate(${t.x}px, ${t.y}px);`:`transform: translate3d(${t.x}px, ${t.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=i}simpleDraw(t){const e=this.render.getRect(),s=e.pageWidth,i=e.height,r=1===t?e.left+e.pageWidth:e.left,a=e.top;this.element.classList.add("--simple"),this.element.style.cssText=`\n            position: absolute; \n            display: block; \n            height: ${i}px; \n            left: ${r}px; \n            top: ${a}px; \n            width: ${s}px; \n            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(t){super.setOrientation(t),this.element.classList.remove("--left","--right"),this.element.classList.add(1===t?"--right":"--left")}setDrawingDensity(t){this.element.classList.remove("--soft","--hard"),this.element.classList.add("--"+t),super.setDrawingDensity(t)}}class o extends i{constructor(t,e,s,i){super(t,e),this.element=s,this.pagesElement=i}load(){for(const t of this.pagesElement){const e=new n(this.render,t,"hard"===t.dataset.density?"hard":"soft");e.load(),this.pages.push(e)}this.createSpread()}}class h{constructor(t,e,s,i){this.direction=t,this.corner=e,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(s,10),this.pageHeight=parseInt(i,10)}calc(t){try{return this.position=this.calcAngleAndPosition(t),this.calculateIntersectPoint(this.position),!0}catch(e){return!1}}getFlippingClipArea(){const t=[];let e=!1;return t.push(this.rect.topLeft),t.push(this.topIntersectPoint),null===this.sideIntersectPoint?e=!0:(t.push(this.sideIntersectPoint),null===this.bottomIntersectPoint&&(e=!1)),t.push(this.bottomIntersectPoint),(e||"bottom"===this.corner)&&t.push(this.rect.bottomLeft),t}getBottomClipArea(){const t=[];return t.push(this.topIntersectPoint),"top"===this.corner?t.push({x:this.pageWidth,y:0}):(null!==this.topIntersectPoint&&t.push({x:this.pageWidth,y:0}),t.push({x:this.pageWidth,y:this.pageHeight})),null!==this.sideIntersectPoint?a.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&t.push(this.sideIntersectPoint):"top"===this.corner&&t.push({x:this.pageWidth,y:this.pageHeight}),t.push(this.bottomIntersectPoint),t.push(this.topIntersectPoint),t}getAngle(){return 0===this.direction?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return 0===this.direction?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return 1===this.direction?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return"top"===this.corner?this.topIntersectPoint:null!==this.sideIntersectPoint?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const t=a.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return 0===this.direction?t:Math.PI-t}calcAngleAndPosition(t){let e=t;if(this.updateAngleAndGeometry(e),e="top"===this.corner?this.checkPositionAtCenterLine(e,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(e,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(e.x-this.pageWidth)<1&&Math.abs(e.y)<1)throw new Error("Point is too small");return e}updateAngleAndGeometry(t){this.angle=this.calculateAngle(t),this.rect=this.getPageRect(t)}calculateAngle(t){const e=this.pageWidth-t.x+1,s="bottom"===this.corner?this.pageHeight-t.y:t.y;let i=2*Math.acos(e/Math.sqrt(s*s+e*e));s<0&&(i=-i);const r=Math.PI-i;if(!isFinite(i)||r>=0&&r<.003)throw new Error("The G point is too small");return"bottom"===this.corner&&(i=-i),i}getPageRect(t){return"top"===this.corner?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],t):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],t)}getRectFromBasePoint(t,e){return{topLeft:this.getRotatedPoint(t[0],e),topRight:this.getRotatedPoint(t[1],e),bottomLeft:this.getRotatedPoint(t[2],e),bottomRight:this.getRotatedPoint(t[3],e)}}getRotatedPoint(t,e){return{x:t.x*Math.cos(this.angle)+t.y*Math.sin(this.angle)+e.x,y:t.y*Math.cos(this.angle)-t.x*Math.sin(this.angle)+e.y}}calculateIntersectPoint(t){const e={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};"top"===this.corner?(this.topIntersectPoint=a.GetIntersectBetweenTwoSegment(e,[t,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=a.GetIntersectBetweenTwoSegment(e,[t,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=a.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=a.GetIntersectBetweenTwoSegment(e,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=a.GetIntersectBetweenTwoSegment(e,[t,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=a.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(t,e,s){let i=t;const r=a.LimitPointToCircle(e,this.pageWidth,i);i!==r&&(i=r,this.updateAngleAndGeometry(i));const n=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let o=this.rect.bottomRight,h=this.rect.topLeft;if("bottom"===this.corner&&(o=this.rect.topRight,h=this.rect.bottomLeft),o.x<=0){const t=a.LimitPointToCircle(s,n,h);t!==i&&(i=t,this.updateAngleAndGeometry(i))}return i}getSegmentToShadowLine(){const t=this.getShadowStartPoint();return[t,t!==this.sideIntersectPoint&&null!==this.sideIntersectPoint?this.sideIntersectPoint:this.bottomIntersectPoint]}}class l{constructor(t,e){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state="read",this.render=t,this.app=e}fold(t){this.setState("user_fold"),null===this.calc&&this.start(t),this.do(this.render.convertToPage(t))}flip(t){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(t))return;if(null!==this.calc&&this.render.finishAnimation(),!this.start(t))return;const e=this.getBoundsRect();this.setState("flipping");const s=e.height/10,i="bottom"===this.calc.getCorner()?e.height-s:s,r="bottom"===this.calc.getCorner()?e.height:0;this.calc.calc({x:e.pageWidth-s,y:i}),this.animateFlippingTo({x:e.pageWidth-s,y:i},{x:-e.pageWidth,y:r},!0)}start(t){this.reset();const e=this.render.convertToBook(t),s=this.getBoundsRect(),i=this.getDirectionByPoint(e),r=e.y>=s.height/2?"bottom":"top";if(!this.checkDirection(i))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(i),this.bottomPage=this.app.getPageCollection().getBottomPage(i),"landscape"===this.render.getOrientation())if(1===i){const t=this.app.getPageCollection().nextBy(this.flippingPage);null!==t&&this.flippingPage.getDensity()!==t.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),t.setDrawingDensity("hard"))}else{const t=this.app.getPageCollection().prevBy(this.flippingPage);null!==t&&this.flippingPage.getDensity()!==t.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),t.setDrawingDensity("hard"))}return this.render.setDirection(i),this.calc=new h(i,r,s.pageWidth.toString(10),s.height.toString(10)),!0}catch(a){return!1}}do(t){if(null!==this.calc&&this.calc.calc(t)){const t=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),0===this.calc.getDirection()?this.flippingPage.setHardAngle(90*(200-2*t)/100):this.flippingPage.setHardAngle(-90*(200-2*t)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),t,this.calc.getDirection())}}flipToPage(t,e){const s=this.app.getPageCollection().getCurrentSpreadIndex(),i=this.app.getPageCollection().getSpreadIndexByPage(t);try{i>s&&(this.app.getPageCollection().setCurrentSpreadIndex(i-1),this.flipNext(e)),i<s&&(this.app.getPageCollection().setCurrentSpreadIndex(i+1),this.flipPrev(e))}catch(r){}}flipNext(t){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:"top"===t?1:this.render.getRect().height-2})}flipPrev(t){this.flip({x:10,y:"top"===t?1:this.render.getRect().height-2})}stopMove(){if(null===this.calc)return;const t=this.calc.getPosition(),e=this.getBoundsRect(),s="bottom"===this.calc.getCorner()?e.height:0;t.x<=0?this.animateFlippingTo(t,{x:-e.pageWidth,y:s},!0):this.animateFlippingTo(t,{x:e.pageWidth,y:s},!1)}showCorner(t){if(!this.checkState("read","fold_corner"))return;const e=this.getBoundsRect(),s=e.pageWidth;if(this.isPointOnCorners(t))if(null===this.calc){if(!this.start(t))return;this.setState("fold_corner"),this.calc.calc({x:s-1,y:1});const i=50,r="bottom"===this.calc.getCorner()?e.height-1:1,a="bottom"===this.calc.getCorner()?e.height-i:i;this.animateFlippingTo({x:s-1,y:r},{x:s-i,y:a},!1,!1)}else this.do(this.render.convertToPage(t));else this.setState("read"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(t,e,s,i=!0){const r=a.GetCordsFromTwoPoint(t,e),n=[];for(const a of r)n.push(()=>this.do(a));const o=this.getAnimationDuration(r.length);this.render.startAnimation(n,o,()=>{this.calc&&(s&&(1===this.calc.getDirection()?this.app.turnToPrevPage():this.app.turnToNextPage()),i&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState("read"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(t){this.state!==t&&(this.app.updateState(t),this.state=t)}getDirectionByPoint(t){const e=this.getBoundsRect();if("portrait"===this.render.getOrientation()){if(t.x-e.pageWidth<=e.width/5)return 1}else if(t.x<e.width/2)return 1;return 0}getAnimationDuration(t){const e=this.app.getSettings().flippingTime;return t>=1e3?e:t/1e3*e}checkDirection(t){return 0===t?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...t){for(const e of t)if(this.state===e)return!0;return!1}isPointOnCorners(t){const e=this.getBoundsRect(),s=e.pageWidth,i=Math.sqrt(Math.pow(s,2)+Math.pow(e.height,2))/5,r=this.render.convertToBook(t);return r.x>0&&r.y>0&&r.x<e.width&&r.y<e.height&&(r.x<i||r.x>e.width-i)&&(r.y<i||r.y>e.height-i)}}class c{constructor(t,e){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=e,this.app=t;const s=new RegExp("Version\\/[\\d\\.]+.*Safari/");this.safari=null!==s.exec(window.navigator.userAgent)}render(t){if(null!==this.animation){const e=Math.round((t-this.animation.startedAt)/this.animation.durationFrame);e<this.animation.frames.length?this.animation.frames[e]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=t,this.drawFrame()}start(){this.update();const t=e=>{this.render(e),requestAnimationFrame(t)};requestAnimationFrame(t)}startAnimation(t,e,s){this.finishAnimation(),this.animation={frames:t,duration:e,durationFrame:e/t.length,onAnimateEnd:s,startedAt:this.timer}}finishAnimation(){null!==this.animation&&(this.animation.frames[this.animation.frames.length-1](),null!==this.animation.onAnimateEnd&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const t=this.calculateBoundsRect();this.orientation!==t&&(this.orientation=t,this.app.updateOrientation(t))}calculateBoundsRect(){let t="landscape";const e=this.getBlockWidth(),s=e/2,i=this.getBlockHeight()/2,r=this.setting.width/this.setting.height;let a=this.setting.width,n=this.setting.height,o=s-a;return"stretch"===this.setting.size?(e<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(t="portrait"),a="portrait"===t?this.getBlockWidth():this.getBlockWidth()/2,a>this.setting.maxWidth&&(a=this.setting.maxWidth),n=a/r,n>this.getBlockHeight()&&(n=this.getBlockHeight(),a=n*r),o="portrait"===t?s-a/2-a:s-a):e<2*a&&this.app.getSettings().usePortrait&&(t="portrait",o=s-a/2-a),this.boundsRect={left:o,top:i-n/2,width:2*a,height:n,pageWidth:a},t}setShadowData(t,e,s,i){if(!this.app.getSettings().drawShadow)return;const r=100*this.getSettings().maxShadowOpacity;this.shadow={pos:t,angle:e,width:3*this.getRect().pageWidth/4*s/100,opacity:(100-s)*r/100/100,direction:i,progress:2*s}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return null===this.boundsRect&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(t){this.pageRect=t}setDirection(t){this.direction=t}setRightPage(t){null!==t&&t.setOrientation(1),this.rightPage=t}setLeftPage(t){null!==t&&t.setOrientation(0),this.leftPage=t}setBottomPage(t){null!==t&&t.setOrientation(1===this.direction?0:1),this.bottomPage=t}setFlippingPage(t){null!==t&&t.setOrientation(0===this.direction&&"portrait"!==this.orientation?0:1),this.flippingPage=t}convertToBook(t){const e=this.getRect();return{x:t.x-e.left,y:t.y-e.top}}isSafari(){return this.safari}convertToPage(t,e){e||(e=this.direction);const s=this.getRect();return{x:0===e?t.x-s.left-s.width/2:s.width/2-t.x+s.left,y:t.y-s.top}}convertToGlobal(t,e){if(e||(e=this.direction),null==t)return null;const s=this.getRect();return{x:0===e?t.x+s.left+s.width/2:s.width/2-t.x+s.left,y:t.y+s.top}}convertRectToGlobal(t,e){return e||(e=this.direction),{topLeft:this.convertToGlobal(t.topLeft,e),topRight:this.convertToGlobal(t.topRight,e),bottomLeft:this.convertToGlobal(t.bottomLeft,e),bottomRight:this.convertToGlobal(t.bottomRight,e)}}}class d extends c{constructor(t,e,s){super(t,e),this.canvas=s,this.ctx=s.getContext("2d")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),"portrait"!==this.orientation&&null!=this.leftPage&&this.leftPage.simpleDraw(0),null!=this.rightPage&&this.rightPage.simpleDraw(1),null!=this.bottomPage&&this.bottomPage.draw(),this.drawBookShadow(),null!=this.flippingPage&&this.flippingPage.draw(),null!=this.shadow&&(this.drawOuterShadow(),this.drawInnerShadow());const t=this.getRect();"portrait"===this.orientation&&(this.ctx.beginPath(),this.ctx.rect(t.left+t.pageWidth,t.top,t.width,t.height),this.ctx.clip())}drawBookShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath();const e=t.width/20;this.ctx.rect(t.left,t.top,t.width,t.height);const s={x:t.left+t.width/2-e/2,y:0};this.ctx.translate(s.x,s.y);const i=this.ctx.createLinearGradient(0,0,e,0);i.addColorStop(0,"rgba(0, 0, 0, 0)"),i.addColorStop(.4,"rgba(0, 0, 0, 0.2)"),i.addColorStop(.49,"rgba(0, 0, 0, 0.1)"),i.addColorStop(.5,"rgba(0, 0, 0, 0.5)"),i.addColorStop(.51,"rgba(0, 0, 0, 0.4)"),i.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.clip(),this.ctx.fillStyle=i,this.ctx.fillRect(0,0,e,2*t.height),this.ctx.restore()}drawOuterShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(t.left,t.top,t.width,t.height);const e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const s=this.ctx.createLinearGradient(0,0,this.shadow.width,0);0===this.shadow.direction?(this.ctx.translate(0,-100),s.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),s.addColorStop(1,"rgba(0, 0, 0, 0)")):(this.ctx.translate(-this.shadow.width,-100),s.addColorStop(0,"rgba(0, 0, 0, 0)"),s.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")),this.ctx.clip(),this.ctx.fillStyle=s,this.ctx.fillRect(0,0,this.shadow.width,2*t.height),this.ctx.restore()}drawInnerShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath();const e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),s=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(s.topLeft.x,s.topLeft.y),this.ctx.lineTo(s.topRight.x,s.topRight.y),this.ctx.lineTo(s.bottomRight.x,s.bottomRight.y),this.ctx.lineTo(s.bottomLeft.x,s.bottomLeft.y),this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const i=3*this.shadow.width/4,r=this.ctx.createLinearGradient(0,0,i,0);0===this.shadow.direction?(this.ctx.translate(-i,-100),r.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")"),r.addColorStop(.9,"rgba(0, 0, 0, 0.05)"),r.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")"),r.addColorStop(0,"rgba(0, 0, 0, 0)")):(this.ctx.translate(0,-100),r.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),r.addColorStop(.1,"rgba(0, 0, 0, 0.05)"),r.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")"),r.addColorStop(1,"rgba(0, 0, 0, 0)")),this.ctx.clip(),this.ctx.fillStyle=r,this.ctx.fillRect(0,0,i,2*t.height),this.ctx.restore()}clear(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class g{constructor(t,e,s){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=t=>{if(this.checkTarget(t.target)){const e=this.getMousePos(t.clientX,t.clientY);this.app.startUserTouch(e),t.preventDefault()}},this.onTouchStart=t=>{if(this.checkTarget(t.target)&&t.changedTouches.length>0){const e=t.changedTouches[0],s=this.getMousePos(e.clientX,e.clientY);this.touchPoint={point:s,time:Date.now()},setTimeout(()=>{null!==this.touchPoint&&this.app.startUserTouch(s)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||t.preventDefault()}},this.onMouseUp=t=>{const e=this.getMousePos(t.clientX,t.clientY);this.app.userStop(e)},this.onMouseMove=t=>{const e=this.getMousePos(t.clientX,t.clientY);this.app.userMove(e,!1)},this.onTouchMove=t=>{if(t.changedTouches.length>0){const e=t.changedTouches[0],s=this.getMousePos(e.clientX,e.clientY);this.app.getSettings().mobileScrollSupport?(null!==this.touchPoint&&(Math.abs(this.touchPoint.point.x-s.x)>10||"read"!==this.app.getState())&&t.cancelable&&this.app.userMove(s,!0),"read"!==this.app.getState()&&t.preventDefault()):this.app.userMove(s,!0)}},this.onTouchEnd=t=>{if(t.changedTouches.length>0){const e=t.changedTouches[0],s=this.getMousePos(e.clientX,e.clientY);let i=!1;if(null!==this.touchPoint){const t=s.x-this.touchPoint.point.x,e=Math.abs(s.y-this.touchPoint.point.y);Math.abs(t)>this.swipeDistance&&e<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(t>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"),i=!0),this.touchPoint=null}this.app.userStop(s,i)}},this.parentElement=t,t.classList.add("stf__parent"),t.insertAdjacentHTML("afterbegin",'<div class="stf__wrapper"></div>'),this.wrapper=t.querySelector(".stf__wrapper"),this.app=e;const i=this.app.getSettings().usePortrait?1:2;t.style.minWidth=s.minWidth*i+"px",t.style.minHeight=s.minHeight+"px","fixed"===s.size&&(t.style.minWidth=s.width*i+"px",t.style.minHeight=s.height+"px"),s.autoSize&&(t.style.width="100%",t.style.maxWidth=2*s.maxWidth+"px"),t.style.display="block",window.addEventListener("resize",this.onResize,!1),this.swipeDistance=s.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(t){this.wrapper.classList.remove("--portrait","--landscape"),"portrait"===t?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%"),this.wrapper.classList.add("--portrait")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%"),this.wrapper.classList.add("--landscape")),this.update()}removeHandlers(){window.removeEventListener("resize",this.onResize),this.distElement.removeEventListener("mousedown",this.onMouseDown),this.distElement.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("touchend",this.onTouchEnd)}setHandlers(){window.addEventListener("resize",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener("mousedown",this.onMouseDown),this.distElement.addEventListener("touchstart",this.onTouchStart),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("touchend",this.onTouchEnd))}getMousePos(t,e){const s=this.distElement.getBoundingClientRect();return{x:t-s.left,y:e-s.top}}checkTarget(t){return!this.app.getSettings().clickEventForward||!["a","button"].includes(t.tagName.toLowerCase())}}class p extends g{constructor(t,e,s,i){super(t,e,s),this.wrapper.insertAdjacentHTML("afterbegin",'<div class="stf__block"></div>'),this.distElement=t.querySelector(".stf__block"),this.items=i;for(const r of i)this.distElement.appendChild(r);this.setHandlers()}clear(){for(const t of this.items)this.parentElement.appendChild(t)}updateItems(t){this.removeHandlers(),this.distElement.innerHTML="";for(const e of t)this.distElement.appendChild(e);this.items=t,this.setHandlers()}update(){this.app.getRender().update()}}class u extends g{constructor(t,e,s){super(t,e,s),this.wrapper.innerHTML='<canvas class="stf__canvas"></canvas>',this.canvas=t.querySelectorAll("canvas")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const t=getComputedStyle(this.canvas),e=parseInt(t.getPropertyValue("width"),10),s=parseInt(t.getPropertyValue("height"),10);this.canvas.width=e,this.canvas.height=s}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class m extends c{constructor(t,e,s){super(t,e),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=s,this.createShadows()}createShadows(){this.element.insertAdjacentHTML("beforeend",'<div class="stf__outerShadow"></div>\n             <div class="stf__innerShadow"></div>\n             <div class="stf__hardShadow"></div>\n             <div class="stf__hardInnerShadow"></div>'),this.outerShadow=this.element.querySelector(".stf__outerShadow"),this.innerShadow=this.element.querySelector(".stf__innerShadow"),this.hardShadow=this.element.querySelector(".stf__hardShadow"),this.hardInnerShadow=this.element.querySelector(".stf__hardInnerShadow")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText="display: none",this.innerShadow.style.cssText="display: none",this.hardShadow.style.cssText="display: none",this.hardInnerShadow.style.cssText="display: none"}reload(){this.element.querySelector(".stf__outerShadow")||this.createShadows()}drawHardInnerShadow(){const t=this.getRect(),e=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let s=(100-e)*(2.5*t.pageWidth)/100+20;s>t.pageWidth&&(s=t.pageWidth);let i=`\n            display: block;\n            z-index: ${(this.getSettings().startZIndex+5).toString(10)};\n            width: ${s}px;\n            height: ${t.height}px;\n            background: linear-gradient(to right,\n                rgba(0, 0, 0, ${this.shadow.opacity*e/100}) 5%,\n                rgba(0, 0, 0, 0) 100%);\n            left: ${t.left+t.width/2}px;\n            transform-origin: 0 0;\n        `;i+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0);":"transform: translate3d(0, 0, 0) rotateY(180deg);",this.hardInnerShadow.style.cssText=i}drawHardOuterShadow(){const t=this.getRect();let e=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*t.pageWidth)/100+20;e>t.pageWidth&&(e=t.pageWidth);let s=`\n            display: block;\n            z-index: ${(this.getSettings().startZIndex+4).toString(10)};\n            width: ${e}px;\n            height: ${t.height}px;\n            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);\n            left: ${t.left+t.width/2}px;\n            transform-origin: 0 0;\n        `;s+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0) rotateY(180deg);":"transform: translate3d(0, 0, 0);",this.hardShadow.style.cssText=s}drawInnerShadow(){const t=this.getRect(),e=3*this.shadow.width/4,s=0===this.getDirection()?e:0,i=0===this.getDirection()?"to left":"to right",r=this.convertToGlobal(this.shadow.pos),n=this.shadow.angle+3*Math.PI/2,o=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let h="polygon( ";for(const c of o){let t=1===this.getDirection()?{x:-c.x+this.shadow.pos.x,y:c.y-this.shadow.pos.y}:{x:c.x-this.shadow.pos.x,y:c.y-this.shadow.pos.y};t=a.GetRotatedPoint(t,{x:s,y:100},n),h+=t.x+"px "+t.y+"px, "}h=h.slice(0,-2),h+=")";const l=`\n            display: block;\n            z-index: ${(this.getSettings().startZIndex+10).toString(10)};\n            width: ${e}px;\n            height: ${2*t.height}px;\n            background: linear-gradient(${i},\n                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,\n                rgba(0, 0, 0, 0.05) 15%,\n                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,\n                rgba(0, 0, 0, 0) 100%);\n            transform-origin: ${s}px 100px;\n            transform: translate3d(${r.x-s}px, ${r.y-100}px, 0) rotate(${n}rad);\n            clip-path: ${h};\n            -webkit-clip-path: ${h};\n        `;this.innerShadow.style.cssText=l}drawOuterShadow(){const t=this.getRect(),e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),s=this.shadow.angle+3*Math.PI/2,i=1===this.getDirection()?this.shadow.width:0,r=0===this.getDirection()?"to right":"to left",n=[{x:0,y:0},{x:t.pageWidth,y:0},{x:t.pageWidth,y:t.height},{x:0,y:t.height}];let o="polygon( ";for(const l of n)if(null!==l){let t=1===this.getDirection()?{x:-l.x+this.shadow.pos.x,y:l.y-this.shadow.pos.y}:{x:l.x-this.shadow.pos.x,y:l.y-this.shadow.pos.y};t=a.GetRotatedPoint(t,{x:i,y:100},s),o+=t.x+"px "+t.y+"px, "}o=o.slice(0,-2),o+=")";const h=`\n            display: block;\n            z-index: ${(this.getSettings().startZIndex+10).toString(10)};\n            width: ${this.shadow.width}px;\n            height: ${2*t.height}px;\n            background: linear-gradient(${r}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));\n            transform-origin: ${i}px 100px;\n            transform: translate3d(${e.x-i}px, ${e.y-100}px, 0) rotate(${s}rad);\n            clip-path: ${o};\n            -webkit-clip-path: ${o};\n        `;this.outerShadow.style.cssText=h}drawLeftPage(){"portrait"!==this.orientation&&null!==this.leftPage&&(1===this.direction&&null!==this.flippingPage&&"hard"===this.flippingPage.getDrawingDensity()?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){null!==this.rightPage&&(0===this.direction&&null!==this.flippingPage&&"hard"===this.flippingPage.getDrawingDensity()?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(null===this.bottomPage)return;const t=null!=this.flippingPage?this.flippingPage.getDrawingDensity():null;"portrait"===this.orientation&&1===this.direction||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(t))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),null!=this.flippingPage&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),null!=this.shadow&&null!==this.flippingPage&&("soft"===this.flippingPage.getDrawingDensity()?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const t of this.app.getPageCollection().getPages())t!==this.leftPage&&t!==this.rightPage&&t!==this.flippingPage&&t!==this.bottomPage&&(t.getElement().style.cssText="display: none"),t.getTemporaryCopy()!==this.flippingPage&&t.hideTemporaryCopy()}update(){super.update(),null!==this.rightPage&&this.rightPage.setOrientation(1),null!==this.leftPage&&this.leftPage.setOrientation(0)}}class x{constructor(){this._default={startPage:0,size:"fixed",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(t){const e=this._default;if(Object.assign(e,t),"stretch"!==e.size&&"fixed"!==e.size)throw new Error('Invalid size type. Available only "fixed" and "stretch" value');if(e.width<=0||e.height<=0)throw new Error("Invalid width or height");if(e.flippingTime<=0)throw new Error("Invalid flipping time");return"stretch"===e.size?(e.minWidth<=0&&(e.minWidth=100),e.maxWidth<e.minWidth&&(e.maxWidth=2e3),e.minHeight<=0&&(e.minHeight=100),e.maxHeight<e.minHeight&&(e.maxHeight=2e3)):(e.minWidth=e.width,e.maxWidth=e.width,e.minHeight=e.height,e.maxHeight=e.height),e}}!function(t,e){void 0===e&&(e={});var s=e.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===s&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}(".stf__parent {\n  position: relative;\n  display: block;\n  box-sizing: border-box;\n  transform: translateZ(0);\n\n  -ms-touch-action: pan-y;\n  touch-action: pan-y;\n}\n\n.sft__wrapper {\n  position: relative;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.stf__parent canvas {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n}\n\n.stf__block {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  perspective: 2000px;\n}\n\n.stf__item {\n  display: none;\n  position: absolute;\n  transform-style: preserve-3d;\n}\n\n.stf__outerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__innerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__hardShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__hardInnerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}"),t.PageFlip=class extends class{constructor(){this.events=new Map}on(t,e){return this.events.has(t)?this.events.get(t).push(e):this.events.set(t,[e]),this}off(t){this.events.delete(t)}trigger(t,e,s=null){if(this.events.has(t))for(const i of this.events.get(t))i({data:s,object:e})}}{constructor(t,e){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=(new x).getSettings(e),this.block=t}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(t){this.ui=new u(this.block,this,this.setting);const e=this.ui.getCanvas();this.render=new d(this,this.setting,e),this.flipController=new l(this.render,this),this.pages=new r(this,this.render,t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(t){this.ui=new p(this.block,this,this.setting,t),this.render=new m(this,this.setting,this.ui.getDistElement()),this.flipController=new l(this.render,this),this.pages=new o(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(t){const e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new r(this,this.render,t),this.pages.load(),this.pages.show(e),this.trigger("update",this,{page:e,mode:this.render.getOrientation()})}updateFromHtml(t){const e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new o(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.ui.updateItems(t),this.render.reload(),this.pages.show(e),this.trigger("update",this,{page:e,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(t){this.pages.show(t)}flipNext(t="top"){this.flipController.flipNext(t)}flipPrev(t="top"){this.flipController.flipPrev(t)}flip(t,e="top"){this.flipController.flipToPage(t,e)}updateState(t){this.trigger("changeState",this,t)}updatePageIndex(t){this.trigger("flip",this,t)}updateOrientation(t){this.ui.setOrientationStyle(t),this.update(),this.trigger("changeOrientation",this,t)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(t){return this.pages.getPage(t)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(t){this.mousePosition=t,this.isUserTouch=!0,this.isUserMove=!1}userMove(t,e){this.isUserTouch||e||!this.setting.showPageCorners?this.isUserTouch&&a.GetDistanceBetweenTwoPoint(this.mousePosition,t)>5&&(this.isUserMove=!0,this.flipController.fold(t)):this.flipController.showCorner(t)}userStop(t,e=!1){this.isUserTouch&&(this.isUserTouch=!1,e||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(t)))}},Object.defineProperty(t,"__esModule",{value:!0})}(m.exports);var x=m.exports;const w=i.forwardRef((t,s)=>{const r=e.useRef(null),a=e.useRef([]),n=e.useRef(),[o,h]=e.useState([]);e.useImperativeHandle(s,()=>({pageFlip:()=>n.current}));const l=e.useCallback(()=>{n.current&&n.current.clear()},[]),c=e.useCallback(()=>{const t=n.current;t&&(t.off("flip"),t.off("changeOrientation"),t.off("changeState"),t.off("init"),t.off("update"))},[]);return e.useEffect(()=>{if(a.current=[],t.children){const e=i.Children.map(t.children,t=>i.cloneElement(t,{ref:t=>{t&&a.current.push(t)}}));t.renderOnlyPageLengthChange&&o.length===e.length||(e.length<o.length&&l(),h(e))}},[t.children]),e.useEffect(()=>{o.length>0&&a.current.length>0&&(c(),r.current&&!n.current&&(n.current=new x.PageFlip(r.current,t)),n.current.getFlipController()?n.current.updateFromHtml(a.current):n.current.loadFromHTML(a.current),(()=>{const e=n.current;e&&(t.onFlip&&e.on("flip",e=>t.onFlip(e)),t.onChangeOrientation&&e.on("changeOrientation",e=>t.onChangeOrientation(e)),t.onChangeState&&e.on("changeState",e=>t.onChangeState(e)),t.onInit&&e.on("init",e=>t.onInit(e)),t.onUpdate&&e.on("update",e=>t.onUpdate(e)))})())},[o]),i.createElement("div",{ref:r,className:t.className,style:t.style},o)}),y=i.memo(w),f=()=>{const[s,i]=e.useState(0),[r,a]=e.useState(!1),n=[{id:1,src:"src/resources/toys/Artboard.Flyer00.jpeg",alt:"Flyer 00"},{id:2,src:"src/resources/toys/Artboard.Flyer01.jpeg",alt:"Flyer 01"},{id:3,src:"src/resources/toys/Artboard.Flyer02.jpeg",alt:"Flyer 02"},{id:4,src:"src/resources/toys/Artboard.Flyer04.jpeg",alt:"Flyer 04"},{id:5,src:"src/resources/toys/Artboard.Flyer05.jpeg",alt:"Flyer 05"},{id:6,src:"src/resources/toys/Artboard.Flyer06.jpeg",alt:"Flyer 06"},{id:7,src:"src/resources/toys/Artboard.Flyer07.jpg",alt:"Flyer 07"},{id:8,src:"src/resources/toys/Artboard.Flyer08.jpeg",alt:"Flyer 08"},{id:9,src:"src/resources/toys/Artboard.Flyer09.jpeg",alt:"Flyer 09"},{id:10,src:"src/resources/toys/Artboard.Flyer010.jpeg",alt:"Flyer 010"},{id:11,src:"src/resources/toys/Artboard.Flyer011.jpeg",alt:"Flyer 011"},{id:12,src:"src/resources/toys/Artboard.Flyer012six.jpg",alt:"Flyer 012 Six"},{id:13,src:"src/resources/toys/Artboard.Flyer013.jpg",alt:"Flyer 013"},{id:14,src:"src/resources/toys/Artboard 1flyer six ig.jpg",alt:"Flyer Six IG"}];return e.useEffect(()=>{const t=()=>{a(!0),setTimeout(()=>a(!1),1200)};return window.addEventListener("flip",t),()=>window.removeEventListener("flip",t)},[]),t.jsxs("div",{className:"flex justify-center items-center min-h-[600px] sm:min-h-[700px] md:min-h-[800px] lg:min-h-[900px] py-8 sm:py-12 md:py-16 relative overflow-hidden px-4 sm:px-6",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-900 via-black to-zinc-900"}),t.jsx("div",{className:"absolute inset-0 opacity-10 sm:opacity-20",children:t.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(220,38,38,0.1)_1px,transparent_1px),linear-gradient(90deg,rgba(220,38,38,0.1)_1px,transparent_1px)] bg-[size:25px_25px] sm:bg-[size:50px_50px] animate-pulse"})}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-600/10 sm:from-red-600/15 via-transparent to-red-600/10 sm:to-red-600/15 blur-2xl sm:blur-3xl scale-100 sm:scale-150 opacity-40 sm:opacity-60 animate-pulse"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-red-500/8 sm:from-red-500/10 via-transparent to-red-600/8 sm:to-red-600/10 blur-xl sm:blur-2xl scale-75 sm:scale-125 opacity-30 sm:opacity-40 animate-pulse",style:{animationDelay:"1s"}}),t.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(4)].map((e,s)=>t.jsx("div",{className:"absolute w-2 h-2 sm:w-4 sm:h-4 bg-gradient-to-r from-red-500 to-red-600 rounded-full blur-sm animate-ping",style:{left:100*Math.random()+"%",top:100*Math.random()+"%",animationDelay:.5*s+"s",animationDuration:2+2*Math.random()+"s"}},s))}),t.jsxs("div",{className:"relative z-10 w-full max-w-[95vw] sm:max-w-[90vw] md:max-w-[85vw] lg:max-w-[80vw]",children:[t.jsx(y,{width:window.innerWidth<640?300:window.innerWidth<768?400:window.innerWidth<1024?500:700,height:window.innerWidth<640?400:window.innerWidth<768?500:window.innerWidth<1024?600:900,size:"stretch",minWidth:window.innerWidth<640?250:window.innerWidth<768?350:window.innerWidth<1024?450:600,maxWidth:window.innerWidth<640?350:window.innerWidth<768?450:window.innerWidth<1024?550:900,minHeight:window.innerWidth<640?300:window.innerWidth<768?400:window.innerWidth<1024?500:700,maxHeight:window.innerWidth<640?450:window.innerWidth<768?550:window.innerWidth<1024?650:1100,flippingTime:window.innerWidth<640?1e3:1500,className:"shadow-2xl",startPage:0,drawShadow:!0,usePortrait:window.innerWidth<640,startZIndex:0,autoSize:!0,maxShadowOpacity:window.innerWidth<640?.6:.8,showPageCorners:window.innerWidth>=768,disableFlipByClick:!1,useMouseEvents:!0,swipeDistance:window.innerWidth<640?20:30,clickEventForward:!0,useBoundingRect:!1,style:{boxShadow:window.innerWidth<640?"0 15px 40px rgba(220, 38, 38, 0.3), 0 0 60px rgba(220, 38, 38, 0.1)":"0 25px 80px rgba(220, 38, 38, 0.4), 0 0 150px rgba(220, 38, 38, 0.2), 0 0 200px rgba(220, 38, 38, 0.1), inset 0 0 50px rgba(220, 38, 38, 0.05)",borderRadius:window.innerWidth<640?"15px":"25px",border:window.innerWidth<640?"2px solid rgba(220, 38, 38, 0.2)":"3px solid rgba(220, 38, 38, 0.3)",background:"linear-gradient(145deg, rgba(220, 38, 38, 0.1), rgba(0, 0, 0, 0.8))"},onFlip:t=>{i(t.data),a(!0),setTimeout(()=>a(!1),window.innerWidth<640?1e3:1500)},onChangeState:t=>{},onInit:t=>{},children:n.map((e,s)=>t.jsxs("div",{className:"demoPage","data-density":"hard",style:{background:"\n                  linear-gradient(145deg, #0a0a0a, #1a1a1a),\n                  radial-gradient(circle at 20% 20%, rgba(220, 38, 38, 0.1) 0%, transparent 50%),\n                  radial-gradient(circle at 80% 80%, rgba(220, 38, 38, 0.05) 0%, transparent 50%)\n                ",display:"flex",alignItems:"center",justifyContent:"center",padding:window.innerWidth<640?"20px":window.innerWidth<768?"25px":"40px",boxSizing:"border-box",borderRadius:window.innerWidth<640?"10px":window.innerWidth<768?"15px":"20px",border:window.innerWidth<640?"1px solid rgba(220, 38, 38, 0.1)":"2px solid rgba(220, 38, 38, 0.2)",boxShadow:window.innerWidth<640?"inset 0 0 20px rgba(220, 38, 38, 0.05), 0 0 15px rgba(220, 38, 38, 0.03)":"inset 0 0 40px rgba(220, 38, 38, 0.1), 0 0 30px rgba(220, 38, 38, 0.05)",position:"relative",overflow:"hidden"},children:[t.jsx("div",{className:"absolute inset-0 opacity-5 sm:opacity-10",children:t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,rgba(220,38,38,0.3)_0%,transparent_70%)]"})}),t.jsxs("div",{className:"relative w-full h-full flex items-center justify-center group",children:[t.jsx("img",{src:e.src,alt:e.alt,className:"max-w-full max-h-full object-contain transition-all duration-700 group-hover:scale-105 sm:group-hover:scale-110",style:{filter:window.innerWidth<640?"drop-shadow(0 10px 20px rgba(0,0,0,0.4))":"drop-shadow(0 20px 40px rgba(0,0,0,0.5)) drop-shadow(0 0 20px rgba(220, 38, 38, 0.2))",borderRadius:window.innerWidth<640?"8px":"15px",border:window.innerWidth<640?"2px solid rgba(255,255,255,0.1)":"3px solid rgba(255,255,255,0.15)",boxShadow:window.innerWidth<640?"inset 0 0 10px rgba(255,255,255,0.05), 0 0 15px rgba(220, 38, 38, 0.2)":"inset 0 0 20px rgba(255,255,255,0.1), 0 0 30px rgba(220, 38, 38, 0.3)"}}),t.jsxs("div",{className:`absolute ${window.innerWidth<640?"bottom-4 right-4":"bottom-8 right-8"} bg-gradient-to-r from-red-600 via-red-500 to-red-600 text-white ${window.innerWidth<640?"px-3 py-1.5 text-sm":"px-6 py-3 text-xl"} font-bold shadow-lg sm:shadow-2xl border border-red-400/30 sm:border-2 sm:border-red-400/40 rounded-full backdrop-blur-sm`,children:[t.jsx("span",{className:"relative z-10",children:s+1}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent rounded-full"})]}),t.jsxs("div",{className:`absolute ${window.innerWidth<640?"top-4 left-4":"top-8 left-8"} bg-black/80 backdrop-blur-md text-white ${window.innerWidth<640?"px-3 py-1.5 text-xs":"px-6 py-3 text-base"} font-bold border border-white/20 sm:border-2 sm:border-white/30 rounded-lg sm:rounded-xl shadow-lg sm:shadow-2xl max-w-[60%] sm:max-w-none`,children:[t.jsx("span",{className:"relative z-10 truncate sm:normal-case",children:e.alt}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-600/20 to-transparent rounded-lg sm:rounded-xl"})]}),window.innerWidth>=640&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"absolute top-6 right-6 w-4 h-4 bg-gradient-to-r from-red-600 to-red-500 rounded-full opacity-80 shadow-lg animate-pulse"}),t.jsx("div",{className:"absolute bottom-6 left-6 w-3 h-3 bg-gradient-to-r from-red-500 to-red-400 rounded-full opacity-80 shadow-lg animate-pulse",style:{animationDelay:"0.5s"}})]}),window.innerWidth>=768&&t.jsx("div",{className:"absolute top-0 right-0 w-0 h-0 border-l-[50px] border-l-transparent border-t-[50px] border-t-red-600/30 opacity-60"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-600/10 via-transparent to-red-600/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-xl"})]})]},e.id))}),t.jsx("div",{className:"mt-8 sm:mt-12 md:mt-16 text-center px-4",children:t.jsxs("div",{className:"bg-gradient-to-r from-red-600/30 to-red-500/30 backdrop-blur-xl border border-red-400/30 sm:border-2 sm:border-red-400/40 rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 max-w-sm sm:max-w-lg mx-auto shadow-xl sm:shadow-2xl",children:[t.jsxs("div",{className:"relative",children:[t.jsxs("h3",{className:"text-white text-lg sm:text-xl md:text-2xl font-bold mb-3 sm:mb-4 flex items-center justify-center",children:[t.jsx("span",{className:"mr-2 sm:mr-3",children:"游꿪"}),t.jsx("span",{className:"text-sm sm:text-base md:text-lg",children:"츼lbum de Posters"}),t.jsx("span",{className:"ml-2 sm:ml-3",children:"游꿪"})]}),t.jsx("p",{className:"text-white/80 text-sm sm:text-base md:text-lg mb-4 sm:mb-6",children:"Haz clic y arrastra para voltear las p치ginas"}),t.jsxs("div",{className:"flex justify-center space-x-2 sm:space-x-4 mb-3 sm:mb-4",children:[t.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5 bg-red-600 rounded-full animate-pulse shadow-lg"}),t.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5 bg-red-600 rounded-full animate-pulse shadow-lg",style:{animationDelay:"0.2s"}}),t.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5 bg-red-600 rounded-full animate-pulse shadow-lg",style:{animationDelay:"0.4s"}})]}),t.jsxs("p",{className:"text-white/60 text-xs sm:text-sm",children:["P치gina ",s+1," de ",n.length]})]}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-600/10 via-transparent to-red-600/10 rounded-xl sm:rounded-2xl blur-xl scale-110 -z-10"})]})}),t.jsx("div",{className:"mt-4 sm:mt-6 md:mt-8 flex justify-center space-x-1 sm:space-x-2 px-4",children:n.map((e,i)=>t.jsx("div",{className:"w-2 h-2 sm:w-3 sm:h-3 rounded-full transition-all duration-300 "+(i===s?"bg-red-600 scale-125 shadow-lg":"bg-red-600/40 hover:bg-red-600/60")},i))})]}),t.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[t.jsx("div",{className:"absolute top-1/4 left-1/4 w-16 h-16 sm:w-24 sm:h-24 md:w-32 md:h-32 bg-red-600/20 rounded-full blur-2xl sm:blur-3xl animate-pulse"}),t.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-12 h-12 sm:w-16 sm:h-16 md:w-24 md:h-24 bg-red-500/15 rounded-full blur-xl sm:blur-2xl animate-pulse",style:{animationDelay:"1s"}})]})]})},b=({videoSrc:s,alt:i})=>{const r=e.useRef(null),[c,d]=e.useState(!1),[g,p]=e.useState(!1),[u,m]=e.useState(0),[x,w]=e.useState(0),[y,f]=e.useState(!1);e.useEffect(()=>{const t=r.current;if(!t)return;const e=()=>{t.currentTime%.5<.1&&m(t.currentTime)},s=()=>w(t.duration),i=()=>d(!0),a=()=>d(!1);t.addEventListener("timeupdate",e),t.addEventListener("loadedmetadata",s),t.addEventListener("play",i),t.addEventListener("pause",a);return(async()=>{try{await t.play(),d(!0)}catch(e){}})(),()=>{t.removeEventListener("timeupdate",e),t.removeEventListener("loadedmetadata",s),t.removeEventListener("play",i),t.removeEventListener("pause",a)}},[]);const b=async()=>{if(r.current)try{c?r.current.pause():await r.current.play()}catch(t){}},v=t=>`${Math.floor(t/60)}:${Math.floor(t%60).toString().padStart(2,"0")}`;return t.jsxs("div",{className:"relative group",children:[t.jsxs("div",{className:"relative mx-auto w-[280px] h-[560px] bg-gradient-to-b from-gray-800 via-gray-900 to-black rounded-[3rem] p-3 shadow-2xl border-4 border-gray-700 transform rotate-2 hover:rotate-0 transition-transform duration-300 hover:scale-105",children:[t.jsxs("div",{className:"relative w-full h-full bg-black rounded-[2.5rem] overflow-hidden",children:[t.jsx("div",{className:"relative w-full h-full",children:t.jsxs("div",{className:"relative w-full h-full bg-black",children:[t.jsx("video",{ref:r,src:s,className:"w-full h-full object-cover",onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),onClick:b,autoPlay:!0,loop:!0,muted:!0,playsInline:!0}),!c&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:t.jsx("button",{onClick:b,className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white/30 transition-all duration-300","aria-label":"Play video",title:"Play video",children:t.jsx(a,{className:"w-8 h-8 text-white ml-1",fill:"white"})})}),t.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4 transition-opacity duration-300 "+(y?"opacity-100":"opacity-0"),children:[t.jsx("div",{className:"mb-3",children:t.jsx("input",{type:"range",min:"0",max:x||0,value:u,onChange:t=>{const e=parseFloat(t.target.value);r.current&&(r.current.currentTime=e,m(e))},className:"w-full h-1 bg-white/30 rounded-full appearance-none cursor-pointer slider","aria-label":"Video progress",title:"Video progress",style:{background:`linear-gradient(to right, #dc2626 0%, #dc2626 ${u/x*100}%, rgba(255,255,255,0.3) ${u/x*100}%, rgba(255,255,255,0.3) 100%)`}})}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("button",{onClick:b,className:"text-white hover:text-red-400 transition-colors","aria-label":c?"Pause video":"Play video",title:c?"Pause video":"Play video",children:c?t.jsx(n,{size:20}):t.jsx(a,{size:20})}),t.jsx("button",{onClick:()=>{r.current&&(r.current.muted=!g,p(!g))},className:"text-white hover:text-red-400 transition-colors","aria-label":g?"Unmute video":"Mute video",title:g?"Unmute video":"Mute video",children:g?t.jsx(o,{size:20}):t.jsx(h,{size:20})}),t.jsxs("span",{className:"text-white text-sm font-mono",children:[v(u)," / ",v(x)]})]}),t.jsx("button",{className:"text-white hover:text-red-400 transition-colors","aria-label":"Fullscreen video",title:"Fullscreen video",children:t.jsx(l,{size:20})})]})]})]})}),t.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-32 h-6 bg-black rounded-b-2xl z-10"}),t.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 w-32 h-1 bg-white rounded-full opacity-60"})]}),t.jsx("div",{className:"absolute -right-1 top-20 w-1 h-8 bg-gray-600 rounded-l-full"}),t.jsx("div",{className:"absolute -right-1 top-32 w-1 h-12 bg-gray-600 rounded-l-full"}),t.jsx("div",{className:"absolute -right-1 top-48 w-1 h-12 bg-gray-600 rounded-l-full"}),t.jsx("div",{className:"absolute -left-1 top-1/2 transform -translate-y-1/2 w-1 h-16 bg-gray-600 rounded-r-full"})]}),t.jsx("div",{className:"absolute -bottom-4 left-1/2 transform -translate-x-1/2 w-64 h-8 bg-black/20 rounded-full blur-xl"})]})},v=()=>{const[s,i]=e.useState(null),[a,n]=e.useState({x:0,y:0}),[o,h]=e.useState(!0),[l,m]=e.useState("shots"),x=[{id:1,src:"src/resources/imgs/DSC_1052-Enhanced-NR.jpg",alt:"Live performance",category:"shots"},{id:2,src:"src/resources/imgs/DSC_1042.jpg",alt:"Band on stage",category:"shots"},{id:3,src:"src/resources/imgs/DSC_1040.jpg",alt:"Concert moment",category:"shots"},{id:4,src:"src/resources/imgs/DSC_1038-Enhanced-NR.jpg",alt:"Live show",category:"shots"},{id:5,src:"src/resources/imgs/DSC_1034.jpg",alt:"Performance",category:"shots"},{id:6,src:"src/resources/imgs/DSC_1030-Enhanced-NR.jpg",alt:"Stage presence",category:"shots"},{id:7,src:"src/resources/imgs/DSC_1021-2-Enhanced-NR.jpg",alt:"Live energy",category:"shots"},{id:8,src:"src/resources/imgs/DSC_1020-Enhanced-NR.jpg",alt:"Concert atmosphere",category:"shots"},{id:9,src:"src/resources/imgs/DSC_1019-2-Enhanced-NR.jpg",alt:"Band performance",category:"shots"},{id:10,src:"src/resources/imgs/DSC_1016.jpg",alt:"Live moment",category:"shots"},{id:11,src:"src/resources/imgs/DSC_1012.jpg",alt:"Stage show",category:"shots"},{id:12,src:"src/resources/imgs/DSC_1009.jpg",alt:"Concert experience",category:"shots"},{id:13,src:"src/resources/imgs/DSC_1004-Enhanced-NR.jpg",alt:"Live performance",category:"shots"},{id:14,src:"src/resources/imgs/DSC_1003.jpg",alt:"Band moment",category:"shots"},{id:15,src:"src/resources/imgs/DSC_1002-Enhanced-NR.jpg",alt:"Stage presence",category:"shots"},{id:16,src:"src/resources/imgs/DSC_1001-2-Enhanced-NR.jpg",alt:"Live energy",category:"shots"},{id:17,src:"src/resources/imgs/DSC_1000.jpg",alt:"Concert atmosphere",category:"shots"},{id:18,src:"src/resources/imgs/DSC_0999-2-Enhanced-NR.jpg",alt:"Band performance",category:"shots"},{id:19,src:"src/resources/imgs/DSC_0998-Enhanced-NR.jpg",alt:"Live show",category:"shots"},{id:20,src:"src/resources/imgs/DSC_0997.jpg",alt:"Stage moment",category:"shots"},{id:21,src:"src/resources/imgs/DSC_0994-2-Enhanced-NR.jpg",alt:"Live performance",category:"shots"},{id:22,src:"src/resources/imgs/DSC_0993.jpg",alt:"Band on stage",category:"shots"},{id:23,src:"src/resources/imgs/DSC_0991.jpg",alt:"Concert moment",category:"shots"},{id:24,src:"src/resources/imgs/DSC_0989.jpg",alt:"Live show",category:"shots"},{id:25,src:"src/resources/imgs/DSC_0988.jpg",alt:"Performance",category:"shots"},{id:26,src:"src/resources/imgs/DSC_0984.jpg",alt:"Stage presence",category:"shots"},{id:27,src:"src/resources/imgs/DSC_0981-2-Enhanced-NR.jpg",alt:"Live energy",category:"shots"},{id:28,src:"src/resources/imgs/DSC_0975.jpg",alt:"Concert atmosphere",category:"shots"},{id:29,src:"src/resources/imgs/DSC_0974.jpg",alt:"Band performance",category:"shots"},{id:30,src:"src/resources/imgs/DSC_0969.jpg",alt:"Live moment",category:"shots"},{id:31,src:"src/resources/imgs/DSC_0967-2-Enhanced-NR.jpg",alt:"Stage show",category:"shots"},{id:32,src:"src/resources/imgs/DSC_0966-2-Enhanced-NR.jpg",alt:"Concert experience",category:"shots"},{id:33,src:"src/resources/imgs/DSC_0965-2-Enhanced-NR.jpg",alt:"Live performance",category:"shots"},{id:34,src:"src/resources/imgs/DSC_0963.jpg",alt:"Band moment",category:"shots"},{id:35,src:"src/resources/imgs/DSC_0960-2-Enhanced-NR.jpg",alt:"Stage presence",category:"shots"},{id:36,src:"src/resources/imgs/DSC_0958.jpg",alt:"Live energy",category:"shots"},{id:37,src:"src/resources/imgs/DSC_0954.jpg",alt:"Concert atmosphere",category:"shots"},{id:38,src:"src/resources/imgs/DSC_0953-2-Enhanced-NR.jpg",alt:"Band performance",category:"shots"},{id:39,src:"src/resources/imgs/DSC_0951.jpg",alt:"Live show",category:"shots"},{id:40,src:"src/resources/imgs/DSC_0949.jpg",alt:"Stage moment",category:"shots"},{id:41,src:"src/resources/imgs/DSC_0948-2-Enhanced-NR.jpg",alt:"Live performance",category:"shots"},{id:42,src:"src/resources/imgs/DSC_0947.jpg",alt:"Band on stage",category:"shots"},{id:43,src:"src/resources/imgs/DSC_0944-Enhanced-NR.jpg",alt:"Concert moment",category:"shots"},{id:44,src:"src/resources/imgs/DSC_0943-2-Enhanced-NR.jpg",alt:"Live show",category:"shots"},{id:45,src:"src/resources/imgs/DSC_0939-2.jpg",alt:"Performance",category:"shots"},{id:46,src:"src/resources/imgs/DSC_0937-2-Enhanced-NR.jpg",alt:"Stage presence",category:"shots"},{id:47,src:"src/resources/imgs/DSC_0936.jpg",alt:"Live energy",category:"shots"},{id:48,src:"src/resources/imgs/DSC_0935.jpg",alt:"Concert atmosphere",category:"shots"},{id:49,src:"src/resources/imgs/DSC_0933-Enhanced-NR.jpg",alt:"Band performance",category:"shots"},{id:50,src:"src/resources/imgs/DSC_0932-2-Enhanced-NR-3.jpg",alt:"Live moment",category:"shots"},{id:51,src:"src/resources/imgs/DSC_0931.jpg",alt:"Stage show",category:"shots"},{id:52,src:"src/resources/imgs/DSC_0929.jpg",alt:"Concert experience",category:"shots"},{id:53,src:"src/resources/imgs/DSC_0928.jpg",alt:"Live performance",category:"shots"},{id:54,src:"src/resources/imgs/DSC_0927.jpg",alt:"Band moment",category:"shots"},{id:55,src:"src/resources/imgs/DSC_0926.jpg",alt:"Stage presence",category:"shots"},{id:56,src:"src/resources/imgs/DSC_0925.jpg",alt:"Live energy",category:"shots"},{id:57,src:"src/resources/imgs/DSC_0923-2-Enhanced-NR.jpg",alt:"Concert atmosphere",category:"shots"},{id:58,src:"src/resources/imgs/DSC_0922-Enhanced-NR.jpg",alt:"Band performance",category:"shots"},{id:59,src:"src/resources/imgs/DSC_0920-2-Enhanced-NR.jpg",alt:"Live show",category:"shots"},{id:60,src:"src/resources/imgs/DSC_0918.jpg",alt:"Stage moment",category:"shots"},{id:61,src:"src/resources/imgs/DSC_0916-2-Enhanced-NR.jpg",alt:"Live performance",category:"shots"},{id:62,src:"src/resources/imgs/DSC_0915.jpg",alt:"Band on stage",category:"shots"},{id:63,src:"src/resources/imgs/DSC_0910-2-Enhanced-NR.jpg",alt:"Concert moment",category:"shots"},{id:64,src:"src/resources/imgs/DSC_0909-2-Enhanced-NR.jpg",alt:"Live show",category:"shots"},{id:65,src:"src/resources/imgs/DSC_0903.jpg",alt:"Performance",category:"shots"},{id:66,src:"src/resources/imgs/DSC_0902.jpg",alt:"Stage presence",category:"shots"},{id:67,src:"src/resources/imgs/DSC_0901.jpg",alt:"Live energy",category:"shots"},{id:68,src:"src/resources/imgs/DSC_0893-2-Enhanced-NR.jpg",alt:"Concert atmosphere",category:"shots"},{id:69,src:"src/resources/imgs/DSC_0891-Enhanced-NR.jpg",alt:"Band performance",category:"shots"},{id:70,src:"src/resources/imgs/marto.jpg",alt:"Marto portrait",category:"shots"},{id:71,src:"src/resources/imgs/ivan.jpg",alt:"Ivan portrait",category:"shots"},{id:72,src:"src/resources/imgs/gabo.jpg",alt:"Gabo portrait",category:"shots"},{id:73,src:"src/resources/imgs/facu.jpg",alt:"Facu portrait",category:"shots"},{id:74,src:"src/resources/imgs/bandagrande.jpg",alt:"Full band photo",category:"shots"},{id:75,src:"src/resources/imgs/banda.jpg",alt:"Band group photo",category:"shots"},{id:76,src:"src/resources/imgs/agus2.jpg",alt:"Agus portrait 2",category:"shots"},{id:77,src:"src/resources/imgs/agus.jpg",alt:"Agus portrait",category:"shots"},{id:78,src:"src/resources/toys/PrimeraPuaSM.jpeg",alt:"Pua SM 1",category:"picks"},{id:79,src:"src/resources/toys/SegundaPuaSM.jpg",alt:"Pua SM 2",category:"picks"},{id:80,src:"src/resources/toys/TerceraPuaSM.01.jpg",alt:"Pua SM 3.1",category:"picks"},{id:81,src:"src/resources/toys/TerceraPuaSM.02.jpg",alt:"Pua SM 3.2",category:"picks"},{id:82,src:"src/resources/toys/puasPrimeraGeneracion.jpeg",alt:"Puas Primera Generaci칩n",category:"picks"},{id:83,src:"src/resources/toys/puasSegundaGeneracion.jpeg",alt:"Puas Segunda Generaci칩n",category:"picks"},{id:84,src:"src/resources/toys/Artboard@flag.png",alt:"Bandera SM",category:"flag"},{id:85,src:"src/resources/toys/Artboard@flag02.png",alt:"Bandera SM 2",category:"flag"},{id:86,src:"src/resources/toys/Artboard@flag03.jpeg",alt:"Bandera SM 3",category:"flag"},{id:87,src:"src/resources/toys/Artboard@flag04.jpeg",alt:"Bandera SM 4",category:"flag"},{id:88,src:"src/resources/toys/Artboard@flag05.jpeg",alt:"Bandera SM 5",category:"flag"},{id:89,src:"src/resources/toys/Asset 4LOGO.png",alt:"Logo SM 1",category:"logos"},{id:90,src:"src/resources/toys/Asset4LOGO2.png",alt:"Logo SM 2",category:"logos"},{id:91,src:"src/resources/toys/Asset4LOGO3.png",alt:"Logo SM 3",category:"logos"},{id:92,src:"src/resources/toys/Setlist sangre negra viernes 7 de marzo.jpg",alt:"Setlist Sangre Negra",category:"techniques"},{id:93,src:"src/resources/toys/Setlist palermo_liverpool.jpg",alt:"Setlist Palermo Liverpool",category:"techniques"},{id:94,src:"src/resources/toys/Rider tecnico_palermo_liverpool.jpg",alt:"Rider T칠cnico Palermo Liverpool",category:"techniques"},{id:95,src:"src/resources/toys/Artboard 1.Setlist-SixBar.Abril.jpg",alt:"Setlist Six Bar",category:"techniques"},{id:96,src:"src/resources/toys/setlist (1)_page-0001.jpg",alt:"Setlist 1",category:"techniques"},{id:97,src:"src/resources/toys/Setlist 15-02 (1)_page-0001.jpg",alt:"Setlist 15-02",category:"techniques"},{id:98,src:"src/resources/toys/varios (1).jpeg",alt:"Varios 1",category:"varios"},{id:99,src:"src/resources/toys/varios (2).jpeg",alt:"Varios 2",category:"varios"},{id:100,src:"src/resources/toys/varios (3).jpeg",alt:"Varios 3",category:"varios"},{id:101,src:"src/resources/toys/varios (4).jpeg",alt:"Varios 4",category:"varios"},{id:105,src:"src/resources/toys/varios (1).mp4",alt:"Varios Video",category:"varios"},{id:106,src:"src/resources/toys/bandaIA1.jpeg",alt:"Banda IA 1",category:"varios"},{id:107,src:"src/resources/toys/bandaIA2.jpeg",alt:"Banda IA 2",category:"varios"},{id:108,src:"src/resources/toys/bandaIA3.jpeg",alt:"Banda IA 3",category:"varios"},{id:109,src:"src/resources/imgs/wallpaper.png",alt:"Wallpaper",category:"varios"},{id:110,src:"src/resources/toys/Artboard Pin palermo04.png",alt:"Pin Palermo",category:"varios"}],w="shots"===l?x.filter(t=>"shots"===t.category):x.filter(t=>t.category===l);e.useEffect(()=>{let t;const e=e=>{clearTimeout(t),t=setTimeout(()=>{n({x:e.clientX/window.innerWidth,y:e.clientY/window.innerHeight})},16)};window.addEventListener("mousemove",e);const s=setTimeout(()=>{h(!1)},1e3);return()=>{window.removeEventListener("mousemove",e),clearTimeout(s),clearTimeout(t)}},[]);const y=()=>{i(null)},v=t=>{if(null===s)return;const e=x.findIndex(t=>t.id===s);let r;r="prev"===t?(e-1+x.length)%x.length:(e+1)%x.length,i(x[r].id)};return t.jsxs("div",{className:"relative min-h-screen bg-zinc-900",children:[t.jsx("div",{className:"fixed inset-0 opacity-20 bg-gradient-to-br from-red-600/30 via-transparent to-red-600/30"}),t.jsx("main",{className:"relative w-full min-h-screen overflow-y-auto custom-scrollbar",children:t.jsxs("div",{className:"w-full px-4 py-24",children:[t.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-white text-center mb-8",children:[t.jsx("span",{className:"text-red-600",children:"FULL"})," GALLERY"]}),t.jsx("div",{className:"flex flex-wrap justify-center gap-4 mb-16",children:[{id:"shots",name:"SHOTS"},{id:"stickers",name:"STICKERS"},{id:"posters",name:"POSTERS"},{id:"picks",name:"PUAS"},{id:"flag",name:"BANDERAS"},{id:"logos",name:"LOGOS"},{id:"techniques",name:"TECHNICAL"},{id:"varios",name:"VARIOS"}].map(e=>t.jsx("button",{onClick:()=>m(e.id),className:"px-6 py-3 rounded-lg font-bold text-lg transition-all duration-300 transform hover:scale-105\n                  "+(l===e.id?"bg-red-600 text-white shadow-lg shadow-red-500/20":"bg-white/10 text-white/70 hover:bg-white/20 hover:text-white"),children:e.name},e.id))}),"stickers"===l?t.jsx(u,{}):"posters"===l?t.jsx(f,{}):o?t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-red-600"})}):t.jsx("div",{className:"grid gap-8 max-w-[1600px] mx-auto pb-16 "+("shots"===l?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3":"grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2"),children:w.map((e,s)=>{const r=e.src.toLowerCase().endsWith(".mp4");return t.jsx("div",{className:"relative group cursor-pointer overflow-hidden rounded-lg shadow-2xl transform transition-all duration-300 hover:scale-105 "+("shots"===l?"aspect-[4/3]":r?"aspect-auto flex justify-center items-center":"aspect-auto"),onClick:()=>{return t=e.id,void i(t);var t},children:r?t.jsx(b,{videoSrc:e.src,alt:e.alt}):t.jsxs(t.Fragment,{children:[t.jsx("img",{src:e.src,alt:e.alt,loading:"lazy",className:"w-full h-full transition-transform duration-500 "+("shots"===l?"object-cover group-hover:scale-105":"object-contain")}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})},e.id)})})]})}),t.jsx(c,{children:s&&t.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4 overflow-y-auto",onClick:y,children:t.jsxs("div",{className:"relative w-full h-full flex items-center justify-center py-8",style:(()=>{if(s){return{transform:`translate(${40*(a.x-.5)}px, ${40*(a.y-.5)}px)`,transition:"transform 0.1s ease-out"}}return{}})(),children:[(()=>{const e=w.find(t=>t.id===s);return(null==e?void 0:e.src.toLowerCase().endsWith(".mp4"))&&e?t.jsx("div",{className:"w-full h-full flex items-center justify-center",children:t.jsx("video",{src:e.src,controls:!0,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"max-w-full max-h-[90vh] w-auto h-auto object-contain"})}):t.jsx("img",{src:null==e?void 0:e.src,alt:null==e?void 0:e.alt,className:"max-w-full max-h-[90vh] w-auto h-auto object-contain"})})(),t.jsx("button",{onClick:t=>{t.stopPropagation(),v("prev")},className:"fixed left-4 top-1/2 transform -translate-y-1/2 z-10 bg-black/20 text-white p-4 rounded-full opacity-20 hover:opacity-40 transition-all duration-300","aria-label":"Previous image",children:t.jsx(d,{size:32})}),t.jsx("button",{onClick:t=>{t.stopPropagation(),v("next")},className:"fixed right-4 top-1/2 transform -translate-y-1/2 z-10 bg-black/20 text-white p-4 rounded-full opacity-20 hover:opacity-40 transition-all duration-300","aria-label":"Next image",children:t.jsx(g,{size:32})}),t.jsx("button",{className:"fixed top-4 right-4 text-white/20 hover:text-white/40 transition-colors",onClick:y,"aria-label":"Close fullscreen view",children:t.jsx(p,{size:32})})]})})})]})};export{v as default};
